<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Molecular Wiki - Full Glucose & Search</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { display: flex; flex-direction: column; align-items: center; background-color: white; padding: 20px; font-family: sans-serif; }
        .banner { width: 550px; height: 160px; border: 4px solid black; display: flex; justify-content: center; align-items: center; font-size: 70px; margin-bottom: 30px; }
        
        /* Fixed Search Box */
        .search-box { width: 550px; height: 45px; border: 3px solid black; margin-bottom: 30px; overflow: hidden; }
        .search-box input { width: 100%; height: 100%; border: none; text-align: center; font-size: 20px; font-weight: bold; outline: none; }

        .molecule-section { width: 550px; margin-bottom: 40px; }
        .label { font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
        .knowledge-box { width: 300px; height: 50px; border: 3px solid black; margin-bottom: 15px; background: white; }
        .viewer-3d { width: 500px; height: 250px; background-color: #808080; border: 3px solid black; }
    </style>
</head>
<body>

    <div class="banner">Banner</div>

    <div class="search-box">
        <input type="text" id="main-search" placeholder="TYPE HERE & PRESS ENTER" onkeydown="if(event.key==='Enter') startSearch()">
    </div>

    <div class="molecule-section">
        <div class="label">HCL (Hydrochloric Acid)</div>
        <div class="knowledge-box"></div>
        <div id="hcl-container" class="viewer-3d"></div>
    </div>

    <div class="molecule-section">
        <div class="label">H20 (Water)</div>
        <div class="knowledge-box"></div>
        <div id="h2o-container" class="viewer-3d"></div>
    </div>

    <div class="molecule-section">
        <div class="label">Glucose (C6H12O6)</div>
        <div class="knowledge-box"></div>
        <div id="glucose-container" class="viewer-3d"></div>
    </div>

    <script>
        function create3D(id, atoms, bonds) {
            const el = document.getElementById(id);
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(45, el.clientWidth/el.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(el.clientWidth, el.clientHeight);
            renderer.setClearColor(0x808080);
            el.appendChild(renderer.domElement);

            scene.add(new THREE.AmbientLight(0xffffff, 0.8));
            const light = new THREE.PointLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            scene.add(light);

            atoms.forEach(a => {
                const mesh = new THREE.Mesh(
                    new THREE.SphereGeometry(a.s, 20, 20),
                    new THREE.MeshPhongMaterial({ color: a.c })
                );
                mesh.position.set(a.x, a.y, a.z);
                scene.add(mesh);
            });

            bonds.forEach(b => {
                const start = new THREE.Vector3(atoms[b.f].x, atoms[b.f].y, atoms[b.f].z);
                const end = new THREE.Vector3(atoms[b.t].x, atoms[b.t].y, atoms[b.t].z);
                const dist = start.distanceTo(end);
                const cyl = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.08, 0.08, dist, 12),
                    new THREE.MeshPhongMaterial({ color: 0xffffff })
                );
                cyl.position.copy(start.clone().lerp(end, 0.5));
                cyl.quaternion.setFromUnitVectors(new THREE.Vector3(0,1,0), end.clone().sub(start).normalize());
                scene.add(cyl);
            });

            camera.position.z = id === 'glucose-container' ? 10 : 5;
            function anim() { requestAnimationFrame(anim); scene.rotation.y += 0.01; renderer.render(scene, camera); }
            anim();
        }

        // --- HCl Data ---
        create3D('hcl-container', 
            [{c:0xff0000, s:0.7, x:-1, y:0, z:0}, {c:0x00ff00, s:0.5, x:1, y:0, z:0}], [{f:0, t:1}]);

        // --- H2O Data ---
        create3D('h2o-container', 
            [{c:0x00ff00, s:0.6, x:0, y:0.4, z:0}, {c:0x0000ff, s:0.4, x:-0.8, y:-0.4, z:0}, {c:0x0000ff, s:0.4, x:0.8, y:-0.4, z:0}], 
            [{f:0, t:1}, {f:0, t:2}]);

        // --- Accurate Glucose Data (C6H12O6) ---
        const gA = [
            // 6 Carbons (Dark Gray)
            {c:0x333333, s:0.5, x:1.5, y:0, z:0}, {c:0x333333, s:0.5, x:0.7, y:1.3, z:0}, {c:0x333333, s:0.5, x:-0.7, y:1.3, z:0},
            {c:0x333333, s:0.5, x:-1.5, y:0, z:0}, {c:0x333333, s:0.5, x:-0.7, y:-1.3, z:0}, {c:0x333333, s:0.5, x:0.7, y:-1.3, z:0},
            // 6 Oxygens (Red)
            {c:0xff0000, s:0.45, x:2.5, y:0.5, z:0.5}, {c:0xff0000, s:0.45, x:1.2, y:2.2, z:-0.5}, {c:0xff0000, s:0.45, x:-1.2, y:2.2, z:0.5},
            {c:0xff0000, s:0.45, x:-2.5, y:0.5, z:-0.5}, {c:0xff0000, s:0.45, x:-1.2, y:-2.2, z:0.5}, {c:0xff0000, s:0.45, x:1.2, y:-2.2, z:-0.5},
            // 12 Hydrogens (White/Light Blue)
            {c:0xccffff, s:0.3, x:1.8, y:-0.8, z:0.5}, {c:0xccffff, s:0.3, x:2.1, y:0.2, z:-0.6}, {c:0xccffff, s:0.3, x:0.2, y:1.8, z:0.5}, 
            {c:0xccffff, s:0.3, x:1.5, y:2.8, z:0}, {c:0xccffff, s:0.3, x:-0.2, y:1.8, z:-0.5}, {c:0xccffff, s:0.3, x:-1.5, y:2.8, z:0},
            {c:0xccffff, s:0.3, x:-1.8, y:-0.8, z:-0.5}, {c:0xccffff, s:0.3, x:-2.1, y:0.2, z:0.6}, {c:0xccffff, s:0.3, x:-0.2, y:-1.8, z:0.5},
            {c:0xccffff, s:0.3, x:-1.5, y:-2.8, z:0}, {c:0xccffff, s:0.3, x:0.2, y:-1.8, z:-0.5}, {c:0xccffff, s:0.3, x:1.5, y:-2.8, z:0}
        ];
        const gB = [
            {f:0,t:1},{f:1,t:2},{f:2,t:3},{f:3,t:4},{f:4,t:5},{f:5,t:0}, // Carbon Ring
            {f:0,t:6},{f:1,t:7},{f:2,t:8},{f:3,t:9},{f:4,t:10},{f:5,t:11}, // C-O bonds
            {f:0,t:12},{f:6,t:13},{f:1,t:14},{f:7,t:15},{f:2,t:16},{f:8,t:17}, // H bonds...
            {f:3,t:18},{f:9,t:19},{f:4,t:20},{f:10,t:21},{f:5,t:22},{f:11,t:23}
        ];
        create3D('glucose-container', gA, gB);

        // Search Functionality
        function startSearch() {
            const val = document.getElementById('main-search').value;
            alert("Searching for: " + val + "\n(In a real site, this would load a new 3D model!)");
        }
    </script>
</body>
</html>
